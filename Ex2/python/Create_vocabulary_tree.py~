import glob
import cv2
import matplotlib.pyplot as plt

def create_vocabulary_tree(folder):
    names = glob.glob('../data/' + folder + '/*.jpg')
    imgs_c = [cv2.imread(name) for name in names]
    imgs_g = [cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) for img in imgs_c]
    
    sift = cv2.xfeatures2d.SIFT_create()
    kps = [sift.detect(img,None) for img in imgs_g]
    
    imgs_kp = [cv2.drawKeypoints(imgs_g[i], kps[i], None, flags=cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS) for i in range(len(kps))]

    counter = 1
    n = 10
    for i in range(n):
        plt.subplot(n/2, 2, counter)
        counter += 1
        plt.imshow(imgs_kp[i])
        
    plt.show()
    return img

if __name__ == "__main__":
    imgs = create_vocabulary_tree("Covers_test")

